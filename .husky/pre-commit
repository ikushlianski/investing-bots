cd apps/botbox

STAGED_FILES=$(git diff --cached --name-only --diff-filter=ACM | grep -E '\.(ts|tsx)$' | sed 's|^apps/botbox/||' || true)

if [ -n "$STAGED_FILES" ]; then
  echo "Linting staged files..."
  pnpm lint $STAGED_FILES --fix
  cd ../.. && git add apps/botbox/$STAGED_FILES && cd apps/botbox
fi

pnpm typecheck && \
pnpm test